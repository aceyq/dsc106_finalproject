<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Climate Futures Explorer – Prototype</title>
  <link rel="stylesheet" href="style.css" />
  <!-- D3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- Scrollama for scrollytelling -->
  <script src="https://unpkg.com/scrollama"></script>
</head>

<body>
  <header>
    <div class="header-inner">
      <div class="brand">
        <h1>Climate Futures Explorer</h1>
        <p>DSC 106 Final Project – Initial Prototype</p>
      </div>
      <nav class="top-tabs">
        <button class="tab-button active" data-tab="explorer">Interactive Explorer</button>
        <button class="tab-button" data-tab="writeup">Design &amp; Reflection</button>
      </nav>
    </div>
  </header>

  <main>
    <!-- ================ TAB: INTERACTIVE EXPLORER ================ -->
    <section id="tab-explorer" class="tab-panel active">

      <div class="layout-two-col">
        <!-- LEFT: STORY / SCROLLY -->
        <section id="story-column">
          <h2>Following the Branching Paths of the Future</h2>
          <p>
            The same planet can end up in very different places. On the left, each story card introduces
            one CMIP6 emissions pathway. On the right, the map and charts respond: temperatures bend upward,
            rainfall patterns shift, and some regions diverge sharply from the global average. All of these
            futures start from the same world. But they fan out depending on our choices.
          </p>
          <p>
            This explorer is built to help you compare those paths side-by-side, region by region.
            Scroll through the scenarios, then use the map and controls on the right to see how each
            pathway plays out in different parts of the world.
          </p>

          <div id="scenario-steps">
            <article class="scenario-step is-active" data-scenario="ssp126">
              <h3>SSP1-2.6 – A world that pulls back</h3>
              <p>
                In SSP1-2.6, strong climate policy and rapid decarbonization keep warming comparatively
                shallow. Ecosystems still face stress, but changes unfold more slowly, giving forests,
                crops, and cities more time to adapt before major biome shifts lock in.
              </p>
            </article>

            <article class="scenario-step" data-scenario="ssp245">
              <h3>SSP2-4.5 – A “middle-of-the-road” future</h3>
              <p>
                SSP2-4.5 sits close to our current trajectory. Warming accelerates after mid-century,
                and precipitation shifts become more noticeable—heavier downpours in some regions and
                drying in others. Risks for crops, water systems, and fire-prone landscapes start to
                feel less like “rare events” and more like a new normal.
              </p>
            </article>

            <article class="scenario-step" data-scenario="ssp370">
              <h3>SSP3-7.0 – Fragmented action, higher risks</h3>
              <p>
                In SSP3-7.0, global cooperation stalls. Temperatures climb more steeply, and rainfall
                patterns become more volatile. Some regions face repeated droughts while others see
                heavier storms, increasing the chance of vegetation stress, crop failures, and abrupt
                biome disruption.
              </p>
            </article>

            <article class="scenario-step" data-scenario="ssp585">
              <h3>SSP5-8.5 – The fossil-fuel intensive benchmark</h3>
              <p>
                SSP5-8.5 imagines a fossil-fuel heavy world and serves as a “worst-case” benchmark.
                Warming is fast and large, and the climate system has far less time to settle into
                new patterns. In this future, ecosystems are pushed hardest: large-scale biome
                transitions become much more likely, and adaptation has to race to catch up.
              </p>
            </article>
          </div>
        </section>

        <!-- RIGHT: MAP + CONTROLS + CHARTS -->
        <section id="data-column">
          <!-- Map + region controls -->
          <section id="region-panel" class="card">
            <div class="card-header-row">
              <div>
                <h2>Choose a Region, Compare Pathways</h2>
                <p class="eyebrow">Current region:</p>
                <p class="current-region-label" id="current-region-label">Global</p>
              </div>
              <div class="region-control-group">
                <label for="region-select">Region</label>
                <select id="region-select"></select>
              </div>
            </div>

            <div class="scenario-pill-row">
              <span class="pill-label">Pathways:</span>
              <div class="scenario-pills" id="scenario-pills">
                <button class="pill active" data-scn="ssp126">SSP1-2.6</button>
                <button class="pill active" data-scn="ssp245">SSP2-4.5</button>
                <button class="pill active" data-scn="ssp370">SSP3-7.0</button>
                <button class="pill active" data-scn="ssp585">SSP5-8.5</button>
              </div>
            </div>

            <p class="control-help">
              Use the map or dropdown to pick a region. Toggle the scenario buttons to show one pathway at a time
              or compare several. When you scroll through the story cards on the left, the explorer briefly zooms
              in on a single pathway, then hands control back to you.
            </p>

            <!-- 2D world map region selector -->
            <div class="world-map-shell">
              <svg id="region-map-svg" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet">
                <defs>
                  <linearGradient id="mapBg" x1="0" y1="0" x2="1" y2="1">
                    <stop offset="0%" stop-color="#0b1220" />
                    <stop offset="40%" stop-color="#020617" />
                    <stop offset="100%" stop-color="#020617" />
                  </linearGradient>
                </defs>

                <rect class="map-ocean" x="0" y="0" width="800" height="400" fill="url(#mapBg)" rx="26" />

                <!-- simple “graticule” grid -->
                <g class="map-graticule" stroke="#1f2937" stroke-width="0.6">
                  <!-- verticals -->
                  <line x1="100" y1="40" x2="100" y2="360" />
                  <line x1="250" y1="40" x2="250" y2="360" />
                  <line x1="400" y1="40" x2="400" y2="360" />
                  <line x1="550" y1="40" x2="550" y2="360" />
                  <line x1="700" y1="40" x2="700" y2="360" />
                  <!-- horizontals -->
                  <line x1="60" y1="90" x2="740" y2="90" />
                  <line x1="60" y1="170" x2="740" y2="170" />
                  <line x1="60" y1="250" x2="740" y2="250" />
                  <line x1="60" y1="330" x2="740" y2="330" />
                </g>

                <g class="map-dots"></g>
              </svg>
            </div>

            <p class="map-help">
              Click a dot to jump to a region. The region selector stays in sync so you can also adjust it manually.
            </p>
          </section>

          <!-- Charts: temp + precip side-by-side on wide screens -->
          <section id="charts-panel" class="card">
            <h2>How Warm Does It Get? / How Rainfall Patterns Shift</h2>
            <p>
              The two charts below show projected near-surface air temperature (°C) and daily precipitation (mm/day)
              for the selected region under each emissions pathway. Higher-emissions scenarios produce steeper curves:
              the same starting point, but very different destinations.
            </p>

            <div class="chart-grid">
              <div class="chart-card">
                <div class="chart-card-header">
                  <h3>Temperature</h3>
                  <div id="temp-chart-legend" class="legend"></div>
                </div>
                <div id="temp-chart" class="chart-container"></div>
              </div>

              <div class="chart-card">
                <div class="chart-card-header">
                  <h3>Precipitation</h3>
                  <div id="precip-chart-legend" class="legend"></div>
                </div>
                <div id="precip-chart" class="chart-container"></div>
              </div>
            </div>
          </section>

          <!-- Impact snapshot -->
          <section id="impact-panel" class="card">
            <h2>What Does This Add Up To?</h2>
            <p>
              For the highlighted pathway, we compare the beginning and end of the time series in this region.
              These numbers are approximate, but they give a sense of how much the local climate shifts over a
              human lifetime.
            </p>

            <div class="impact-grid">
              <article class="impact-card">
                <header>
                  <p class="impact-label">Warming by 2100</p>
                  <p class="impact-value"><span id="temp-delta">–</span> °C</p>
                </header>
                <p class="impact-body" id="impact-temp-text">
                  Loading temperature change…
                </p>
                <div class="impact-bar">
                  <div class="impact-bar-fill" id="temp-bar-fill"></div>
                </div>
                <p class="impact-footnote">
                  Highlighted pathway:
                  <span id="impact-scenario-label">–</span>
                </p>
              </article>

              <article class="impact-card">
                <header>
                  <p class="impact-label">Change in Daily Rainfall</p>
                  <p class="impact-value"><span id="precip-delta">–</span>%</p>
                </header>
                <p class="impact-body" id="impact-precip-text">
                  Loading precipitation change…
                </p>
                <div class="impact-bar">
                  <div class="impact-bar-fill" id="precip-bar-fill"></div>
                </div>
                <p class="impact-footnote">
                  Positive values indicate wetter conditions on average; negative values indicate drying.
                </p>
              </article>
            </div>

            <p class="small-note">
              Note: Values are rough differences between the earliest and latest years available in the data
              for the selected region and scenario. They are meant for intuition, not precise forecasting.
            </p>
          </section>

        </section>
      </div>
    </section>

    <!-- ================ TAB: DESIGN & REFLECTION ================ -->
    <section id="tab-writeup" class="tab-panel">
      <section id="writeup" class="card">
        <h2>Design &amp; Reflection</h2>

        <h3>What We’ve Built So Far</h3>
        <p>
          This prototype is the first pass at an “explorable explanation” of climate futures. We built the core
          structure of the Climate Futures Explorer, including the scenario story cards on the left, the region
          selector, and two linked D3 line charts for temperature and precipitation on the right.
        </p>
        <p>
          The charts are wired to a shared set of controls so that when a user changes the region, both plots
          update together. When the user toggles different CMIP6 pathways, the visual encodings stay consistent:
          each scenario keeps the same color across charts and legends. We process CMIP6-based summary data for
          temperature and precipitation and load it via JavaScript so that future climate variables or vegetation
          indicators can be added with minimal changes to the code.
        </p>
        <p>
          Beyond the basic visuals, we also implemented a small scrollytelling sequence. As the viewer scrolls
          through each scenario card on the left, the right-hand visuals temporarily focus on that pathway,
          helping the reader connect the narrative language (“rapid mitigation”, “fragmented action”) to concrete
          trajectories in the data.
        </p>

        <h3>What’s Been Hard (and Why)</h3>
        <p>
          The biggest challenge has been balancing interactivity with clarity. It is tempting to add sliders,
          animations, and toggles everywhere, but each new control makes it harder for viewers to know
          where to look. We experimented with multiple layouts before settling on the current two-column design,
          where the story and the data are always visible at the same time.
        </p>
        <p>
          Integrating spatial thinking was also tricky. We wanted a way to highlight that climate change does
          not unfold uniformly, without building a full choropleth map. The compromise is a stylized “mini-world”
          with a small set of clickable dots tied to regions in the dataset. This approach keeps the focus on
          the time series while still giving the reader a mental map of where they are.
        </p>
        <p>
          Finally, summarizing the impacts in an honest but approachable way is non-trivial. We chose to show
          simple beginning-to-end differences in temperature and precipitation for a highlighted pathway, and we
          explicitly label them as approximations rather than forecasts.
        </p>

        <h3>Where We Want to Take This Next</h3>
        <p>
          Looking ahead, there are several directions we’d like to pursue:
        </p>
        <ul>
          <li>
            Layer in more detailed uncertainty views (model spreads and ranges, not just single lines) to
            emphasize that these are projections, not guarantees.
          </li>
          <li>
            Draw more explicit lines between regional climate shifts and potential vegetation responses—for
            example, highlighting where biome transitions or fire regimes are likely to change.
          </li>
          <li>
            Refine the scrollytelling so that each step ends with a clear, memorable takeaway, and experiment
            with more “impact visualization” moments that help the reader feel the difference between pathways
            (not just see it numerically).
          </li>
        </ul>
      </section>
    </section>
  </main>

  <footer>
    <p>Prototype v0.2 – DSC 106 Fall 2025</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
